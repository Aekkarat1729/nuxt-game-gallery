import{_ as N}from"./DmLEbLJU.js";import{f as $,r as i,i as b,j as F,h as T,k as A,n as D,p as V,c as a,a as e,l as g,d as _,t as u,F as I,m as R,o as l,b as k,w as x,e as S,_ as W}from"./CUe4Mrkt.js";import{u as U}from"./BdFRd4GS.js";const Y={class:"min-h-screen bg-gray-50 text-gray-900"},G={class:"sticky top-0 z-30 bg-white/80 backdrop-blur-xl border-b border-gray-200/50"},H={class:"max-w-7xl mx-auto px-6 py-6"},K={class:"text-center space-y-4"},O={class:"text-lg text-gray-600"},P={class:"inline-flex items-center px-3 py-1 rounded-full bg-blue-50 text-blue-700 text-sm font-semibold ml-2 border border-blue-200"},q={key:0,class:"flex items-center justify-center min-h-[60vh]"},J={key:1,class:"max-w-7xl mx-auto px-6 py-8"},Q={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6"},X={class:"relative overflow-hidden aspect-video bg-gray-100",style:{height:"192px"}},Z=["src","alt"],ee={class:"p-5 space-y-4"},te={class:"text-lg font-semibold text-gray-900 line-clamp-2 group-hover:text-blue-600 transition-colors duration-200"},se={class:"flex items-center gap-4 text-sm text-gray-500"},oe={key:0,class:"flex items-center gap-1"},re={key:1,class:"flex items-center gap-1"},ae={class:"space-y-2"},le=["onClick","disabled"],ne={key:0,class:"absolute inset-0 bg-white/20 animate-pulse rounded-lg"},ie={key:2,class:"fixed bottom-6 right-6 z-50"},de={class:"bg-red-50 border border-red-200 text-red-800 p-4 rounded-xl shadow-lg max-w-sm"},ce={class:"flex items-center"},ue={class:"font-medium"},me=$({__name:"wishlist",setup(ge){const f=T(),n=i([]),d=i(""),w=i(!1),v=i(!0),c=i(""),m=i(null);let h=null;const L=b(()=>n.value.length),C=s=>s?new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"short"}):"N/A",B=s=>{const t=s.target;t.src="https://via.placeholder.com/400x225?text=No+Image"},z=b(()=>d.value?n.value.filter(s=>s.game.name.toLowerCase().includes(d.value.toLowerCase())):n.value);function y(s){const t=s.key;t===" "&&s.preventDefault(),w.value=!0,t==="Backspace"?d.value=d.value.slice(0,-1):t.length===1&&(d.value+=t),h&&clearTimeout(h),h=setTimeout(()=>{w.value=!1},2e3)}F(async()=>{var t;window.addEventListener("keydown",y);const s=localStorage.getItem("token");if(s)try{v.value=!0;const{data:r}=await U("/favorites",{baseURL:f.public.apiBase,headers:{Authorization:`Bearer ${s}`}},"$WvYrRywG5-");(t=r.value)!=null&&t.success?n.value=r.value.data||[]:c.value="Failed to load favorites"}catch(r){c.value=r.message||"An error occurred while fetching favorites"}finally{v.value=!1}}),A(()=>{window.removeEventListener("keydown",y)});const j=D()||V().$router;async function M(s){const t=localStorage.getItem("token");if(t)try{if(m.value=s,(await fetch(`${f.public.apiBase}/favorites/${s}`,{method:"DELETE",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}})).ok)n.value=n.value.filter(p=>p.id!==s);else throw new Error("Failed to remove favorite")}catch(r){c.value=r.message||"An error occurred while removing favorite"}finally{m.value=null}}const E=()=>{j.back()};return(s,t)=>{const r=N,p=S;return l(),a("div",Y,[e("div",{class:"sticky top-0 z-30 bg-white/80 backdrop-blur-xl border-b border-gray-200/50"},[e("div",{class:"max-w-7xl mx-auto px-6 py-4"},[e("button",{onClick:E,class:"group flex items-center gap-2 text-gray-600 hover:text-gray-900 transition-colors duration-200"},t[0]||(t[0]=[e("svg",{class:"w-5 h-5 transform group-hover:-translate-x-0.5 transition-transform duration-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M15 19l-7-7 7-7"})],-1),e("span",{class:"font-medium"},"Back",-1)]))])]),e("div",G,[e("div",H,[e("div",K,[t[2]||(t[2]=e("h1",{class:"text-4xl sm:text-5xl font-bold text-gray-900 leading-tight"}," My Wishlist ",-1)),e("p",O,[t[1]||(t[1]=_(" Your collection of Wishlist games! ")),e("span",P,u(L.value)+" games saved ",1)])])])]),v.value?(l(),a("div",q,t[3]||(t[3]=[e("div",{class:"text-center"},[e("div",{class:"w-8 h-8 border-2 border-gray-300 border-t-blue-600 rounded-full animate-spin mx-auto mb-4"}),e("p",{class:"text-gray-600"},"Loading your Wishlist...")],-1)]))):(l(),a("div",J,[e("div",Q,[(l(!0),a(I,null,R(z.value,o=>(l(),a("div",{key:o.game.id,class:"group bg-white rounded-2xl overflow-hidden shadow-sm border border-gray-200/60 hover:shadow-lg hover:border-gray-300/60 transition-all duration-300 hover:-translate-y-1"},[e("div",X,[k(r,null,{fallback:x(()=>t[4]||(t[4]=[e("div",{class:"w-full h-full flex items-center justify-center bg-gray-200"},[e("span",{class:"text-gray-500 text-sm"},"Image loading...")],-1)])),default:x(()=>[e("img",{src:o.game.backgroundImage||"https://via.placeholder.com/400x225?text=No+Image",alt:o.game.name,class:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-105",onError:B},null,40,Z)]),_:2},1024)]),e("div",ee,[e("h3",te,u(o.game.name),1),e("div",se,[o.game.rating?(l(),a("div",oe,[t[5]||(t[5]=e("svg",{class:"w-4 h-4 text-yellow-400 fill-current",viewBox:"0 0 20 20"},[e("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})],-1)),e("span",null,u(o.game.rating.toFixed(1)),1)])):g("",!0),o.game.released?(l(),a("div",re,[t[6]||(t[6]=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),e("span",null,u(C(o.game.released)),1)])):g("",!0)]),e("div",ae,[k(p,{to:`/detail/${o.game.slug}`,class:"w-full bg-blue-600 hover:bg-blue-700 text-white py-2.5 px-4 rounded-xl font-semibold text-center transition-all duration-200 shadow-sm hover:shadow-md flex items-center justify-center gap-2"},{default:x(()=>t[7]||(t[7]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),_(" Details ")])),_:2,__:[7]},1032,["to"]),e("button",{onClick:ve=>M(o.id),disabled:m.value===o.id,class:"w-full text-white py-2 px-3 rounded-lg font-medium text-sm transition-all duration-200 relative overflow-hidden flex items-center justify-center gap-1 bg-red-500 hover:bg-red-600"},[m.value===o.id?(l(),a("div",ne)):g("",!0),t[8]||(t[8]=e("svg",{class:"w-4 h-4 relative z-10",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})],-1)),t[9]||(t[9]=e("span",{class:"relative z-10"},"Remove",-1))],8,le)])])]))),128))])])),c.value?(l(),a("div",ie,[e("div",de,[e("div",ce,[t[10]||(t[10]=e("div",{class:"w-8 h-8 bg-red-100 rounded-full flex items-center justify-center mr-3"},[e("svg",{class:"w-4 h-4 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 15.5c-.77.833.192 2.5 1.732 2.5z"})])],-1)),e("p",ue,u(c.value),1)])])])):g("",!0)])}}}),fe=W(me,[["__scopeId","data-v-fc63dce2"]]);export{fe as default};
