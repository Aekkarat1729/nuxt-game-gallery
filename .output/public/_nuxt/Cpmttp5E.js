import{f as $,n as L,p as H,r as u,j as I,c as p,a as e,l as x,d as f,t as v,C as U,q as k,s as j,v as g,x as w,z,F as R,m as P,o as m,B as q,_ as J}from"./CUe4Mrkt.js";const O={class:"min-h-screen bg-gradient-to-br from-slate-50 to-gray-100"},F={class:"relative px-6 py-8"},G={class:"max-w-7xl mx-auto"},W={class:"bg-white/80 backdrop-blur-sm border border-white/20 shadow-xl rounded-2xl p-8 mb-8"},K={class:"flex justify-between items-center"},Q={class:"flex items-center space-x-4"},X={class:"text-gray-600 mt-1"},Y={class:"font-semibold text-indigo-600"},Z={class:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8"},ee={class:"bg-white/80 backdrop-blur-sm border border-white/20 shadow-xl rounded-2xl overflow-hidden"},te={class:"p-8"},oe={key:0,class:"mb-6 p-4 bg-red-50 border-l-4 border-red-400 rounded-r-xl"},se={class:"flex items-center"},re={class:"text-red-700 font-medium"},ae={key:1,class:"mb-6 p-4 bg-green-50 border-l-4 border-green-400 rounded-r-xl"},le={class:"flex items-center"},ne={class:"text-green-700 font-medium"},ie={class:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-2xl p-6 mb-8 border border-blue-100"},de={class:"relative"},ue={class:"relative"},ce=["disabled"],pe={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24"},ve={class:"overflow-hidden rounded-2xl border border-gray-200"},me={class:"overflow-x-auto"},ge={class:"w-full"},xe={class:"bg-white divide-y divide-gray-200"},fe={class:"px-6 py-4 whitespace-nowrap text-sm font-mono text-gray-600"},be={class:"px-6 py-4 whitespace-nowrap"},he={class:"flex items-center"},we={class:"h-8 w-8 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-full flex items-center justify-center mr-3"},ye={class:"text-white text-xs font-bold"},ke={class:"text-sm font-medium text-gray-900"},_e={class:"px-6 py-4 whitespace-nowrap"},Me={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-600"},Ce={class:"px-6 py-4 whitespace-nowrap text-sm"},Ue={class:"flex space-x-3"},je=["onClick"],ze=["onClick","disabled"],Ae={key:0,class:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4"},Se={class:"bg-white rounded-2xl shadow-2xl w-full max-w-md transform transition-all"},Be={class:"flex justify-end gap-3 pt-4"},Ee=["disabled"],Ve={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24"},Te=$({__name:"index",setup(De){const y=L()||H().$router,d=u([]),l=u(""),i=u(""),a=u(!1),_=u("Admin"),M=u(""),c=u({email:"",password:"",role:"USER"}),r=u(null),b=u(!1);function A(s){try{const o=s.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),n=decodeURIComponent(atob(o).split("").map(h=>"%"+("00"+h.charCodeAt(0).toString(16)).slice(-2)).join(""));return JSON.parse(n)}catch{return null}}async function S(){try{a.value=!0;const s=localStorage.getItem("token"),o=await(await fetch("http://localhost:3000/users",{headers:{Authorization:`Bearer ${s}`}})).json();if(!o.success)throw new Error(o.message);d.value=o.data}catch(s){l.value=s.message}finally{a.value=!1}}async function B(){try{a.value=!0,l.value="",i.value="";const s=localStorage.getItem("token"),o=await(await fetch("http://localhost:3000/users",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify(c.value)})).json();if(!o.success)throw new Error(o.message);d.value.push(o.data),i.value="User added successfully",c.value={email:"",password:"",role:"USER"},setTimeout(()=>i.value="",5e3)}catch(s){l.value=s.message,setTimeout(()=>l.value="",5e3)}finally{a.value=!1}}async function E(s){const t=d.value.find(o=>o.id===s);t&&(r.value={...t,password:""},b.value=!0)}async function V(){if(r.value)try{a.value=!0,l.value="",i.value="";const s=localStorage.getItem("token"),o=await(await fetch(`http://localhost:3000/users/${r.value.id}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify({email:r.value.email,password:r.value.password||void 0,role:r.value.role})})).json();if(!o.success)throw new Error(o.message);const n=d.value.findIndex(h=>h.id===r.value.id);n!==-1&&(d.value[n]=o.data),i.value="User updated successfully",b.value=!1,setTimeout(()=>i.value="",5e3)}catch(s){l.value=s.message,setTimeout(()=>l.value="",5e3)}finally{a.value=!1}}async function T(s){const t=d.value.find(n=>n.id===s);if(!(!t||!window.confirm(`Are you sure you want to delete user "${t.email}"?`)))try{a.value=!0,l.value="",i.value="";const n=localStorage.getItem("token"),C=await(await fetch(`http://localhost:3000/users/${s}`,{method:"DELETE",headers:{Authorization:`Bearer ${n}`}})).json();if(!C.success)throw new Error(C.message);d.value=d.value.filter(N=>N.id!==s),i.value="User deleted successfully",setTimeout(()=>i.value="",5e3)}catch(n){l.value=n.message,setTimeout(()=>l.value="",5e3)}finally{a.value=!1}}function D(){localStorage.removeItem("token"),y.push("/login")}return I(()=>{const s=localStorage.getItem("token");if(s){const t=A(s);t!=null&&t.email&&(_.value=t.email.split("@")[0],M.value=t.email)}S()}),(s,t)=>(m(),p("section",O,[t[32]||(t[32]=e("div",{class:"absolute inset-0 bg-[radial-gradient(circle_at_20%_80%,_theme(colors.blue.100)_0%,_transparent_50%),radial-gradient(circle_at_80%_20%,_theme(colors.indigo.100)_0%,_transparent_50%),radial-gradient(circle_at_40%_40%,_theme(colors.gray.100)_0%,_transparent_50%)]"},null,-1)),e("div",F,[e("div",G,[e("div",W,[e("div",K,[e("div",Q,[t[11]||(t[11]=e("div",{class:"h-12 w-12 bg-gradient-to-br from-indigo-500 to-blue-600 rounded-xl flex items-center justify-center"},[e("svg",{class:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})])],-1)),e("div",null,[t[10]||(t[10]=e("h1",{class:"text-3xl font-bold bg-gradient-to-r from-gray-900 to-gray-600 bg-clip-text text-transparent"}," Admin Dashboard ",-1)),e("p",X,[t[9]||(t[9]=f("Welcome back, ")),e("span",Y,v(_.value),1)])])]),e("button",{onClick:D,class:"group flex items-center space-x-2 px-4 py-2 bg-red-50 hover:bg-red-500 text-red-600 hover:text-white rounded-xl transition-all duration-200 border border-red-200 hover:border-red-500"},t[12]||(t[12]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})],-1),e("span",{class:"font-medium"},"Logout",-1)]))])]),e("div",Z,[e("button",{onClick:t[0]||(t[0]=o=>U(y).push("/admin/GameManagement")),class:"group bg-white/80 backdrop-blur-sm border border-white/20 shadow-lg hover:shadow-xl rounded-2xl p-6 transition-all duration-300 hover:-translate-y-1"},t[13]||(t[13]=[k('<div class="flex items-center space-x-4" data-v-29246373><div class="h-14 w-14 bg-gradient-to-br from-indigo-500 to-indigo-600 rounded-xl flex items-center justify-center group-hover:scale-110 transition-transform duration-200" data-v-29246373><svg class="w-7 h-7 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-29246373><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.828 14.828a4 4 0 01-5.656 0M9 10h1m4 0h1m-6 4h.01M12 5v.01M3 12a9 9 0 1018 0 9 9 0 00-18 0z" data-v-29246373></path></svg></div><div class="text-left" data-v-29246373><h3 class="text-xl font-bold text-gray-900" data-v-29246373>Game Management</h3><p class="text-gray-600 text-sm" data-v-29246373>Manage games and content</p></div></div>',1)])),e("button",{onClick:t[1]||(t[1]=o=>U(y).push("/admin/DealManagement")),class:"group bg-white/80 backdrop-blur-sm border border-white/20 shadow-lg hover:shadow-xl rounded-2xl p-6 transition-all duration-300 hover:-translate-y-1"},t[14]||(t[14]=[k('<div class="flex items-center space-x-4" data-v-29246373><div class="h-14 w-14 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center group-hover:scale-110 transition-transform duration-200" data-v-29246373><svg class="w-7 h-7 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-29246373><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z" data-v-29246373></path></svg></div><div class="text-left" data-v-29246373><h3 class="text-xl font-bold text-gray-900" data-v-29246373>Deal Management</h3><p class="text-gray-600 text-sm" data-v-29246373>Manage offers and promotions</p></div></div>',1)]))]),e("div",ee,[t[24]||(t[24]=k('<div class="bg-gradient-to-r from-gray-50 to-white px-8 py-6 border-b border-gray-200/50" data-v-29246373><div class="flex items-center space-x-3" data-v-29246373><div class="h-10 w-10 bg-gradient-to-br from-purple-500 to-pink-500 rounded-xl flex items-center justify-center" data-v-29246373><svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-29246373><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z" data-v-29246373></path></svg></div><h2 class="text-2xl font-bold text-gray-900" data-v-29246373>User Management</h2></div></div>',1)),e("div",te,[l.value?(m(),p("div",oe,[e("div",se,[t[15]||(t[15]=e("svg",{class:"w-5 h-5 text-red-400 mr-2",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})],-1)),e("p",re,v(l.value),1)])])):x("",!0),i.value?(m(),p("div",ae,[e("div",le,[t[16]||(t[16]=e("svg",{class:"w-5 h-5 text-green-400 mr-2",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})],-1)),e("p",ne,v(i.value),1)])])):x("",!0),e("div",ie,[t[22]||(t[22]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4 flex items-center"},[e("svg",{class:"w-5 h-5 text-indigo-600 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})]),f(" Add New User ")],-1)),e("form",{onSubmit:j(B,["prevent"]),class:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4"},[e("div",de,[g(e("input",{"onUpdate:modelValue":t[2]||(t[2]=o=>c.value.email=o),type:"email",placeholder:"Email address",class:"w-full pl-10 pr-4 py-3 bg-white border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all duration-200",required:""},null,512),[[w,c.value.email]]),t[17]||(t[17]=e("svg",{class:"absolute left-3 top-3.5 w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 12a4 4 0 10-8 0 4 4 0 008 0zm0 0v1.5a2.5 2.5 0 005 0V12a9 9 0 10-9 9m4.5-1.206a8.959 8.959 0 01-4.5 1.207"})],-1))]),e("div",ue,[g(e("input",{"onUpdate:modelValue":t[3]||(t[3]=o=>c.value.password=o),type:"password",placeholder:"Password",class:"w-full pl-10 pr-4 py-3 bg-white border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all duration-200",required:""},null,512),[[w,c.value.password]]),t[18]||(t[18]=e("svg",{class:"absolute left-3 top-3.5 w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})],-1))]),g(e("select",{"onUpdate:modelValue":t[4]||(t[4]=o=>c.value.role=o),class:"py-3 px-4 bg-white border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all duration-200"},t[19]||(t[19]=[e("option",{value:"USER"},"User",-1),e("option",{value:"ADMIN"},"Admin",-1)]),512),[[z,c.value.role]]),e("button",{type:"submit",disabled:a.value,class:"bg-gradient-to-r from-indigo-600 to-blue-600 text-white py-3 px-6 rounded-xl hover:from-indigo-700 hover:to-blue-700 transition-all duration-200 font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center"},[a.value?(m(),p("svg",pe,t[20]||(t[20]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):x("",!0),t[21]||(t[21]=f(" Add User "))],8,ce)],32)]),e("div",ve,[e("div",me,[e("table",ge,[t[23]||(t[23]=e("thead",{class:"bg-gradient-to-r from-gray-50 to-gray-100"},[e("tr",null,[e("th",{class:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider"},"ID"),e("th",{class:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider"},"Email"),e("th",{class:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider"},"Role"),e("th",{class:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider"},"Created"),e("th",{class:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider"},"Actions")])],-1)),e("tbody",xe,[(m(!0),p(R,null,P(d.value,o=>(m(),p("tr",{key:o.id,class:"hover:bg-gray-50 transition-colors duration-150"},[e("td",fe,"#"+v(o.id),1),e("td",be,[e("div",he,[e("div",we,[e("span",ye,v(o.email.charAt(0).toUpperCase()),1)]),e("span",ke,v(o.email),1)])]),e("td",_e,[e("span",{class:q([o.role==="ADMIN"?"bg-purple-100 text-purple-800 border-purple-200":"bg-blue-100 text-blue-800 border-blue-200","inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border"])},v(o.role),3)]),e("td",Me,v(new Date(o.createdAt).toLocaleDateString("th-TH")),1),e("td",Ce,[e("div",Ue,[e("button",{onClick:n=>E(o.id),class:"text-indigo-600 hover:text-indigo-800 font-medium hover:bg-indigo-50 px-2 py-1 rounded-lg transition-all duration-150"}," Edit ",8,je),e("button",{onClick:n=>T(o.id),disabled:a.value||o.email===M.value,class:"text-red-600 hover:text-red-800 font-medium hover:bg-red-50 px-2 py-1 rounded-lg transition-all duration-150 disabled:opacity-50 disabled:cursor-not-allowed"}," Delete ",8,ze)])])]))),128))])])])])])]),b.value&&r.value?(m(),p("div",Ae,[e("div",Se,[t[31]||(t[31]=e("div",{class:"bg-gradient-to-r from-indigo-500 to-blue-600 text-white rounded-t-2xl p-6"},[e("h3",{class:"text-xl font-bold flex items-center"},[e("svg",{class:"w-6 h-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})]),f(" Edit User ")])],-1)),e("form",{onSubmit:j(V,["prevent"]),class:"p-6 space-y-4"},[e("div",null,[t[25]||(t[25]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Email Address",-1)),g(e("input",{"onUpdate:modelValue":t[5]||(t[5]=o=>r.value.email=o),type:"email",class:"w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all duration-200",required:""},null,512),[[w,r.value.email]])]),e("div",null,[t[26]||(t[26]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"New Password",-1)),g(e("input",{"onUpdate:modelValue":t[6]||(t[6]=o=>r.value.password=o),type:"password",placeholder:"Leave blank to keep current password",class:"w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all duration-200"},null,512),[[w,r.value.password]])]),e("div",null,[t[28]||(t[28]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Role",-1)),g(e("select",{"onUpdate:modelValue":t[7]||(t[7]=o=>r.value.role=o),class:"w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all duration-200"},t[27]||(t[27]=[e("option",{value:"USER"},"User",-1),e("option",{value:"ADMIN"},"Admin",-1)]),512),[[z,r.value.role]])]),e("div",Be,[e("button",{type:"button",onClick:t[8]||(t[8]=o=>b.value=!1),class:"px-6 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-xl transition-all duration-200 font-medium"}," Cancel "),e("button",{type:"submit",disabled:a.value,class:"px-6 py-2 bg-gradient-to-r from-indigo-600 to-blue-600 hover:from-indigo-700 hover:to-blue-700 text-white rounded-xl transition-all duration-200 font-medium disabled:opacity-50 flex items-center"},[a.value?(m(),p("svg",Ve,t[29]||(t[29]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):x("",!0),t[30]||(t[30]=f(" Save Changes "))],8,Ee)])],32)])])):x("",!0)])])]))}}),$e=J(Te,[["__scopeId","data-v-29246373"]]);export{$e as default};
