import{f as D,n as E,p as B,r as p,j as M,c as m,a as t,l as w,C as _,t as u,s as h,v as r,x as n,F as $,m as A,o as f,_ as C}from"./CUe4Mrkt.js";const j={class:"relative min-h-screen bg-gray-50 px-4 py-8"},L={class:"max-w-7xl mx-auto"},N={class:"bg-gradient-to-r from-indigo-600 to-blue-600 text-white rounded-xl p-8 mb-10 flex justify-between items-center shadow-lg"},T={key:0,class:"p-4 bg-red-50 border border-red-200 rounded-xl mb-6"},q={class:"text-red-600 text-sm"},z={key:1,class:"p-4 bg-green-50 border border-green-200 rounded-xl mb-6"},W={class:"text-green-600 text-sm"},O={class:"bg-white rounded-xl shadow-md p-8 mb-10"},F=["disabled"],J={class:"bg-white rounded-xl shadow-md p-8"},P={class:"overflow-x-auto"},H={class:"w-full text-left border-collapse"},K={class:"p-4 text-sm text-gray-600"},Q={class:"p-4 text-sm text-gray-600"},X={class:"p-4 text-sm text-gray-600"},Y={class:"p-4 text-sm text-gray-600"},Z={class:"p-4 text-sm text-gray-600"},ee={class:"p-4 text-sm text-gray-600"},te={class:"p-4 text-sm text-gray-600"},oe={class:"p-4 text-sm text-gray-600"},se={class:"p-4 text-sm flex gap-3"},ae=["onClick"],le=["onClick","disabled"],re={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},ne={class:"bg-white rounded-xl p-8 w-full max-w-md"},de={class:"flex justify-end gap-3"},ie=["disabled"],ue=D({__name:"GameManagement",setup(ge){const k=E()||B().$router,g=p([]),c=p(""),b=p(""),i=p(!1),a=p({rawgId:0,name:"",slug:"",description:"",metacritic:null,website:"",esrb:"",backgroundImage:"",released:"",rating:null}),s=p(null),v=p(!1);async function I(){try{i.value=!0;const d=localStorage.getItem("token"),o=await(await fetch("http://localhost:3000/games",{headers:{Authorization:`Bearer ${d}`}})).json();if(!o.success)throw new Error(o.message);g.value=o.data}catch(d){c.value=d.message}finally{i.value=!1}}async function U(){try{i.value=!0;const d=localStorage.getItem("token"),e={...a.value,metacritic:a.value.metacritic||void 0,website:a.value.website||void 0,esrb:a.value.esrb||void 0,backgroundImage:a.value.backgroundImage||void 0,released:a.value.released||void 0,rating:a.value.rating||void 0},l=await(await fetch("http://localhost:3000/games",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${d}`},body:JSON.stringify(e)})).json();if(!l.success)throw new Error(l.message);g.value.push(l.data),b.value="Game added successfully",a.value={rawgId:0,name:"",slug:"",description:"",metacritic:null,website:"",esrb:"",backgroundImage:"",released:"",rating:null}}catch(d){c.value=d.message}finally{i.value=!1}}async function S(d){try{i.value=!0;const e=localStorage.getItem("token"),l=await(await fetch(`http://localhost:3000/games/${d}`,{})).json();if(!l.success)throw new Error(l.message);s.value={...l.data,released:l.data.released?new Date(l.data.released).toISOString().split("T")[0]:""},v.value=!0}catch(e){c.value=e.message}finally{i.value=!1}}async function G(){if(s.value)try{i.value=!0;const d=localStorage.getItem("token"),e={...s.value,metacritic:s.value.metacritic||void 0,website:s.value.website||void 0,esrb:s.value.esrb||void 0,backgroundImage:s.value.backgroundImage||void 0,released:s.value.released||void 0,rating:s.value.rating||void 0},l=await(await fetch(`http://localhost:3000/games/${s.value.id}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${d}`},body:JSON.stringify(e)})).json();if(!l.success)throw new Error(l.message);const x=g.value.findIndex(y=>y.id===s.value.id);x!==-1&&(g.value[x]=l.data),b.value="Game updated successfully",v.value=!1}catch(d){c.value=d.message}finally{i.value=!1}}async function V(d){const e=g.value.find(l=>l.id===d);if(!(!e||!window.confirm(`Are you sure you want to delete game "${e.name}"?`)))try{i.value=!0;const l=localStorage.getItem("token"),y=await(await fetch(`http://localhost:3000/games/${d}`,{method:"DELETE",headers:{Authorization:`Bearer ${l}`}})).json();if(!y.success)throw new Error(y.message);g.value=g.value.filter(R=>R.id!==d),b.value="Game deleted successfully"}catch(l){c.value=l.message}finally{i.value=!1}}return M(()=>{I()}),(d,e)=>(f(),m("section",j,[t("div",L,[t("div",N,[e[22]||(e[22]=t("div",null,[t("h1",{class:"text-4xl font-extrabold tracking-tight"},"Game Management"),t("p",{class:"text-lg mt-2 opacity-90"},"Manage your gaming platform's games.")],-1)),t("button",{onClick:e[0]||(e[0]=o=>_(k).push("/admin")),class:"px-4 py-2 bg-indigo-500 text-white rounded-lg hover:bg-indigo-600 transition transform active:scale-95"}," Back to Dashboard ")]),c.value?(f(),m("div",T,[t("p",q,u(c.value),1)])):w("",!0),b.value?(f(),m("div",z,[t("p",W,u(b.value),1)])):w("",!0),t("div",O,[e[23]||(e[23]=t("h2",{class:"text-2xl font-bold text-gray-900 mb-6"},"Add New Game",-1)),t("form",{onSubmit:h(U,["prevent"]),class:"grid grid-cols-1 gap-4 sm:grid-cols-2"},[r(t("input",{"onUpdate:modelValue":e[1]||(e[1]=o=>a.value.rawgId=o),type:"number",placeholder:"RAWG ID",class:"p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:outline-none",required:""},null,512),[[n,a.value.rawgId,void 0,{number:!0}]]),r(t("input",{"onUpdate:modelValue":e[2]||(e[2]=o=>a.value.name=o),type:"text",placeholder:"Game Name",class:"p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:outline-none",required:""},null,512),[[n,a.value.name]]),r(t("input",{"onUpdate:modelValue":e[3]||(e[3]=o=>a.value.slug=o),type:"text",placeholder:"Slug",class:"p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:outline-none",required:""},null,512),[[n,a.value.slug]]),r(t("textarea",{"onUpdate:modelValue":e[4]||(e[4]=o=>a.value.description=o),placeholder:"Description",class:"p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:outline-none",rows:"4"},null,512),[[n,a.value.description]]),r(t("input",{"onUpdate:modelValue":e[5]||(e[5]=o=>a.value.metacritic=o),type:"number",placeholder:"Metacritic Score",class:"p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:outline-none"},null,512),[[n,a.value.metacritic,void 0,{number:!0}]]),r(t("input",{"onUpdate:modelValue":e[6]||(e[6]=o=>a.value.website=o),type:"url",placeholder:"Website URL",class:"p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:outline-none"},null,512),[[n,a.value.website]]),r(t("input",{"onUpdate:modelValue":e[7]||(e[7]=o=>a.value.esrb=o),type:"text",placeholder:"ESRB Rating",class:"p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:outline-none"},null,512),[[n,a.value.esrb]]),r(t("input",{"onUpdate:modelValue":e[8]||(e[8]=o=>a.value.backgroundImage=o),type:"url",placeholder:"Background Image URL",class:"p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:outline-none"},null,512),[[n,a.value.backgroundImage]]),r(t("input",{"onUpdate:modelValue":e[9]||(e[9]=o=>a.value.released=o),type:"date",placeholder:"Release Date",class:"p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:outline-none"},null,512),[[n,a.value.released]]),r(t("input",{"onUpdate:modelValue":e[10]||(e[10]=o=>a.value.rating=o),type:"number",step:"0.01",placeholder:"Rating",class:"p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:outline-none"},null,512),[[n,a.value.rating,void 0,{number:!0}]]),t("button",{type:"submit",disabled:i.value,class:"bg-indigo-600 text-white py-3 px-6 rounded-lg hover:bg-indigo-700 transition disabled:opacity-50"}," Add Game ",8,F)],32)]),t("div",J,[e[25]||(e[25]=t("h2",{class:"text-2xl font-bold text-gray-900 mb-6"},"Games List",-1)),t("div",P,[t("table",H,[e[24]||(e[24]=t("thead",null,[t("tr",{class:"bg-gray-100"},[t("th",{class:"p-4 text-sm font-semibold text-gray-700"},"ID"),t("th",{class:"p-4 text-sm font-semibold text-gray-700"},"RAWG ID"),t("th",{class:"p-4 text-sm font-semibold text-gray-700"},"Name"),t("th",{class:"p-4 text-sm font-semibold text-gray-700"},"Slug"),t("th",{class:"p-4 text-sm font-semibold text-gray-700"},"Metacritic"),t("th",{class:"p-4 text-sm font-semibold text-gray-700"},"ESRB"),t("th",{class:"p-4 text-sm font-semibold text-gray-700"},"Released"),t("th",{class:"p-4 text-sm font-semibold text-gray-700"},"Rating"),t("th",{class:"p-4 text-sm font-semibold text-gray-700"},"Actions")])],-1)),t("tbody",null,[(f(!0),m($,null,A(g.value,o=>(f(),m("tr",{key:o.id,class:"border-t hover:bg-gray-50"},[t("td",K,u(o.id),1),t("td",Q,u(o.rawgId),1),t("td",X,u(o.name),1),t("td",Y,u(o.slug),1),t("td",Z,u(o.metacritic||"-"),1),t("td",ee,u(o.esrb||"-"),1),t("td",te,u(o.released?new Date(o.released).toLocaleDateString():"-"),1),t("td",oe,u(o.rating||"-"),1),t("td",se,[t("button",{onClick:l=>S(o.id),class:"text-indigo-600 hover:text-indigo-800 font-medium"},"Edit",8,ae),t("button",{onClick:l=>V(o.id),disabled:i.value,class:"text-red-600 hover:text-red-800 font-medium disabled:opacity-50"},"Delete",8,le)])]))),128))])])])]),v.value&&s.value?(f(),m("div",re,[t("div",ne,[e[26]||(e[26]=t("h3",{class:"text-xl font-semibold text-gray-900 mb-6"},"Edit Game",-1)),t("form",{onSubmit:h(G,["prevent"]),class:"space-y-4"},[r(t("input",{"onUpdate:modelValue":e[11]||(e[11]=o=>s.value.rawgId=o),type:"number",placeholder:"RAWG ID",class:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:outline-none",required:""},null,512),[[n,s.value.rawgId,void 0,{number:!0}]]),r(t("input",{"onUpdate:modelValue":e[12]||(e[12]=o=>s.value.name=o),type:"text",placeholder:"Game Name",class:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:outline-none",required:""},null,512),[[n,s.value.name]]),r(t("input",{"onUpdate:modelValue":e[13]||(e[13]=o=>s.value.slug=o),type:"text",placeholder:"Slug",class:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:outline-none",required:""},null,512),[[n,s.value.slug]]),r(t("textarea",{"onUpdate:modelValue":e[14]||(e[14]=o=>s.value.description=o),placeholder:"Description",class:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:outline-none",rows:"4"},null,512),[[n,s.value.description]]),r(t("input",{"onUpdate:modelValue":e[15]||(e[15]=o=>s.value.metacritic=o),type:"number",placeholder:"Metacritic Score",class:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:outline-none"},null,512),[[n,s.value.metacritic,void 0,{number:!0}]]),r(t("input",{"onUpdate:modelValue":e[16]||(e[16]=o=>s.value.website=o),type:"url",placeholder:"Website URL",class:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:outline-none"},null,512),[[n,s.value.website]]),r(t("input",{"onUpdate:modelValue":e[17]||(e[17]=o=>s.value.esrb=o),type:"text",placeholder:"ESRB Rating",class:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:outline-none"},null,512),[[n,s.value.esrb]]),r(t("input",{"onUpdate:modelValue":e[18]||(e[18]=o=>s.value.backgroundImage=o),type:"url",placeholder:"Background Image URL",class:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:outline-none"},null,512),[[n,s.value.backgroundImage]]),r(t("input",{"onUpdate:modelValue":e[19]||(e[19]=o=>s.value.released=o),type:"date",placeholder:"Release Date",class:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:outline-none"},null,512),[[n,s.value.released]]),r(t("input",{"onUpdate:modelValue":e[20]||(e[20]=o=>s.value.rating=o),type:"number",step:"0.01",placeholder:"Rating",class:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:outline-none"},null,512),[[n,s.value.rating,void 0,{number:!0}]]),t("div",de,[t("button",{type:"button",onClick:e[21]||(e[21]=o=>v.value=!1),class:"bg-gray-300 px-4 py-2 rounded-lg hover:bg-gray-400 transition"},"Cancel"),t("button",{type:"submit",disabled:i.value,class:"bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition disabled:opacity-50"},"Save",8,ie)])],32)])])):w("",!0)])]))}}),pe=C(ue,[["__scopeId","data-v-73f06dff"]]);export{pe as default};
